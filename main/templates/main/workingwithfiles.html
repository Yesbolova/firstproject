{% extends "main/base.html" %}

{% block title %}Файлдармен жұмыс{% endblock %}

{% block content %}

<h1>Файлдармен жұмыс</h1>
<p class="subtitle">
  Бұл сабақта Python тілінде файлдармен қалай жұмыс істейтінімізді үйренеміз:
  файлды ашу, оқу, жазу, жабу, атын өзгерту және позициямен жұмыс.
</p>

<!-- ========================================================= -->
<!-- 1. ОҚУ МАҚСАТЫ -->
<!-- ========================================================= -->
<section class="apple-section" id="goals">
  <div style="display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap;">
    <h2 style="margin:0;">Бағалау критерийі</h2>
    <button class="btn-done" data-block="goals" data-xp="10">
      ⬜ Орындалды (Мақсат)
    </button>
  </div>

  <ul style="margin-top:12px;">
    <li>Файл түрлерін (мәтіндік және бинарлық) ажырата білу;</li>
    <li><code>open()</code>, <code>close()</code>, <code>read()</code>, <code>write()</code> функцияларын қолдану;</li>
    <li>Файлды оқу және жазу режимдеріне түсінік беру;</li>
    <li><code>rename()</code>, <code>tell()</code>, <code>seek()</code> сияқты мүмкіндіктермен танысу;</li>
    <li>Мини-quiz арқылы білімді тексеру.</li>
  </ul>
</section>

<!-- ========================================================= -->
<!-- 2. ТЕОРИЯ -->
<!-- ========================================================= -->
<section class="apple-section" id="theory">
  <div style="display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap;">
    <h2 style="margin:0;">1-бөлім · Теория</h2>
    <button class="btn-done" data-block="theory" data-xp="25">
      ⬜ Орындалды (Теория)
    </button>
  </div>

  <h3 style="margin-top:16px;">Python-дағы файл түрлері</h3>
  <p>Python-да файлдардың екі негізгі түрі бар:</p>
  <ul>
    <li><b>Мәтіндік файлдар (text)</b> — адамның оқи алатын таңбалар тізбегі. Мысалы:
      <code>.txt</code>, <code>.rtf</code>;</li>
    <li><b>Бинарлық файлдар (binary)</b> — деректер 0 және 1 биттері түрінде
      кодталған. Мысалы: <code>.bin</code>, сурет, видео, т.б.</li>
  </ul>

  <p>Кез келген файлмен жұмыс үш негізгі қадамнан тұрады:</p>
  <ol>
    <li>Файлды ашу;</li>
    <li>Операция орындау (оқу немесе жазу);</li>
    <li>Файлды жабу.</li>
  </ol>

  <h3>Файлды ашу — <code>open()</code> функциясы</h3>
  <p><code>open()</code> функциясы файлмен жұмыс істеу үшін арнайы объект жасайды.</p>

  <pre><code class="language-python">f = open(file_name, access_mode)</code></pre>

  <ul>
    <li><code>file_name</code> — ашылатын файл атауы (мысалы, <code>"data.txt"</code>);</li>
    <li><code>access_mode</code> — файлды ашу режимі (оқу, жазу, қосу және т.б.).</li>
  </ul>

  <h4>Негізгі файл режимдері</h4>
  <div style="overflow-x:auto;">
    <table style="border-collapse:collapse;width:100%;font-size:14px;">
      <thead>
        <tr>
          <th style="border-bottom:1px solid #e5e7eb;padding:6px 8px;text-align:left;">Режим</th>
          <th style="border-bottom:1px solid #e5e7eb;padding:6px 8px;text-align:left;">Сипаттамасы</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="padding:6px 8px;"><code>r</code></td>
          <td style="padding:6px 8px;">Тек оқу үшін (файл бар болуы керек).</td>
        </tr>
        <tr>
          <td style="padding:6px 8px;"><code>w</code></td>
          <td style="padding:6px 8px;">Тек жазу үшін. Егер файл жоқ болса, жаңа файл жасайды (бар файлды өшіреді).</td>
        </tr>
        <tr>
          <td style="padding:6px 8px;"><code>a</code></td>
          <td style="padding:6px 8px;">Қосу (append) режимі. Жаңа мәтін файлдың соңына қосылады.</td>
        </tr>
        <tr>
          <td style="padding:6px 8px;"><code>r+</code></td>
          <td style="padding:6px 8px;">Оқу және жазу.</td>
        </tr>
        <tr>
          <td style="padding:6px 8px;"><code>w+</code></td>
          <td style="padding:6px 8px;">Оқу және жазу, файл қайта жазылады (бар болса — ішін тазалайды).</td>
        </tr>
        <tr>
          <td style="padding:6px 8px;"><code>rb</code>, <code>wb</code>, <code>ab</code></td>
          <td style="padding:6px 8px;">Сәйкесінше оқу/жазу/қосу, бірақ <b>бинарлық режимде</b>.</td>
        </tr>
      </tbody>
    </table>
  </div>

  <h3 style="margin-top:18px;">Файлды жабу — <code>close()</code> әдісі</h3>
  <p>Файлмен жұмыс bітсе, ресурстарды босату үшін оны жабу керек.</p>

  <pre><code class="language-python">f = open("example.txt", "r")
# файлмен әртүрлі операциялар
f.close()</code></pre>

  <p>Файл жабылғаннан кейін оны қайта ашпайынша пайдалана алмаймыз.</p>

  <h4>Қауіпсіз әдіс — <code>with</code> конструкциясы</h4>
  <p>
    Көбінесе файлмен жұмыс істеу үшін <code>with open(...)</code> құрылымы қолданылады —
    ол файлды автоматты түрде жабады:
  </p>

  <pre><code class="language-python">with open("example.txt", "r") as f:
    content = f.read()
    print(content)
# мұнда файл автоматты түрде жабылады</code></pre>

  <h3 style="margin-top:18px;">Файлды оқу — <code>read()</code>, <code>readline()</code>, <code>readlines()</code></h3>

  <h4><code>read()</code> функциясы</h4>
  <p><code>read()</code> файлдың мазмұнын толық немесе белгілі бір бөлігін оқиды.</p>

  <pre><code class="language-python">f = open("example.txt", "r")

full_text = f.read()          # файлдың барлығын оқу
print(full_text)

f.close()</code></pre>

  <p>Немесе тек белгіленген символдар санын оқуға болады:</p>

  <pre><code class="language-python">f = open("example.txt", "r")

part = f.read(7)              # алғашқы 7 символды оқу
print(part)

f.close()</code></pre>

  <h4><code>readline()</code> және <code>readlines()</code></h4>
  <p><code>readline()</code> — файлдан бір жолды оқиды, ал <code>readlines()</code> — барлық жолдарды тізімге жинайды.</p>

  <pre><code class="language-python"># test.txt ішінде:
# This is line1.
# This is line2.
# This is line3.

f = open("test.txt", "r")

line1 = f.readline()
print(line1)          # This is line1.

line2 = f.readline()
print(line2)          # This is line2.

f.seek(0)             # позицияны басына қайтарамыз
all_lines = f.readlines()
print(all_lines)      # ['This is line1.\n', 'This is line2.\n', 'This is line3.\n']

f.close()</code></pre>

  <h3 style="margin-top:18px;">Файлға жазу — <code>write()</code> функциясы</h3>
  <p><code>write()</code> файлына мәтін жазу үшін қолданылады.</p>

  <pre><code class="language-python">f = open("xyz.txt", "w")   # егер файл жоқ болса, жасалады
f.write("Hello\n")
f.write("World")
f.close()</code></pre>

  <p>Осыдан кейін <code>xyz.txt</code> файлының ішінде:</p>

  <pre><code class="language-text">Hello
World</code></pre>

  <h3 style="margin-top:18px;">Файлдың атын өзгерту — <code>os.rename()</code></h3>
  <p>Файл атауын өзгерту үшін <code>os</code> модуліндегі <code>rename()</code> функциясы қолданылады.</p>

  <pre><code class="language-python">import os

# xyz.txt файлын abc.txt деп өзгерту
os.rename("xyz.txt", "abc.txt")</code></pre>

  <h3 style="margin-top:18px;">Файлдағы позиция — <code>tell()</code> және <code>seek()</code></h3>
  <ul>
    <li><code>tell()</code> — ағымдағы позицияны (байтпен) қайтарады;</li>
    <li><code>seek()</code> — позицияны өзгертуге мүмкіндік береді.</li>
  </ul>

  <pre><code class="language-python">f = open("example.txt", "r")

first_four = f.read(4)
print(first_four)     # мысалы: This

pos = f.tell()
print(pos)            # 4

f.seek(0)             # позицияны қайтадан басына көшіру
f.close()</code></pre>

  <h3 style="margin-top:18px;">Python-дағы жиі қолданылатын файл әдістері</h3>
  <ul>
    <li><code>file.close()</code> — файлды жабады;</li>
    <li><code>file.read(n)</code> — алғашқы <code>n</code> таңбаны оқиды;</li>
    <li><code>file.readline()</code> — бір жолды оқиды;</li>
    <li><code>file.readlines()</code> — барлық жолдарды тізімге жинайды;</li>
    <li><code>file.write(str)</code> — файлға жол жазады;</li>
    <li><code>file.tell()</code> — ағымдағы позицияны қайтарады;</li>
    <li><code>file.seek(offset, whence)</code> — позицияны өзгертеді.</li>
  </ul>
</section>

<!-- ========================================================= -->
<!-- 3. МЫСАЛДАР -->
<!-- ========================================================= -->
<section class="apple-section" id="examples">
  <div style="display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap;">
    <h2 style="margin:0;">2-бөлім · Мысалдар</h2>
    <button class="btn-done" data-block="examples" data-xp="20">
      ⬜ Орындалды (Мысалдар)
    </button>
  </div>

  <h3 style="margin-top:14px;">1-мысал · Файлдан мәтін оқу</h3>
  <p><code>info.txt</code> файлын оқып, оның мазмұнын экранға шығарамыз.</p>

  <pre><code class="language-python">with open("info.txt", "r") as f:
    text = f.read()
    print("Файл мазмұны:")
    print(text)</code></pre>

  <h3 style="margin-top:18px;">2-мысал · Файлға оқушы тізімін жазу</h3>
  <pre><code class="language-python">students = ["Айша", "Ернар", "Данияр", "Аружан"]

with open("students.txt", "w") as f:
    for name in students:
        f.write(name + "\n")

print("Оқушылар тізімі файлға жазылды.")</code></pre>

  <h3 style="margin-top:18px;">3-мысал · Файлдағы жол санын есептеу</h3>
  <pre><code class="language-python">with open("students.txt", "r") as f:
    lines = f.readlines()

print("Жол саны:", len(lines))</code></pre>
</section>

<!-- ========================================================= -->
<!-- 4. ПРАКТИКА -->
<!-- ========================================================= -->
<section class="apple-section" id="practice">
  <div style="display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap;">
    <h2 style="margin:0;">3-бөлім · Практика</h2>
    <button class="btn-done" data-block="practice" data-xp="20">
      ⬜ Орындалды (Практика)
    </button>
  </div>

  <h3 style="margin-top:14px;">Тапсырма 1</h3>
  <p>
    <code>notes.txt</code> файлын құрып, өзің туралы 3–4 жол ақпарат жазыңыз.
    Содан кейін оны Python көмегімен оқып, экранға шығарыңыз.
  </p>

  <h3>Тапсырма 2</h3>
  <p>
    Пайдаланушыдан 5 оқушының атын сұрап, оларды <code>class.txt</code> файлына жазыңыз
    (әр аты — жаңа жолда).
  </p>

  <h3>Тапсырма 3</h3>
  <p>
    Бар <code>class.txt</code> файлын оқып, жол санын және ең ұзын атты
    экранға шығаратын программа құрыңыз.
  </p>
</section>

<!-- ========================================================= -->
<!-- 5. MINI-QUIZ (ТЕСТ) -->
<!-- ========================================================= -->
<section class="apple-section" id="quiz">
  <div style="display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap;">
    <h2 style="margin:0;">4-бөлім · Mini-Quiz</h2>
    <button class="btn-done" data-block="quiz" data-xp="25">
      ⬜ Орындалды (Quiz)
    </button>
  </div>

  <p style="margin-top:10px;">
    Төмендегі тест сұрақтарына жауап бер. Мұғалімнің платформасында немесе дәптерде белгілеуге болады.
  </p>

  <div class="quiz-wrapper">

    <!-- 1-сұрақ -->
    <div class="quiz-item" data-correct="b">
      <p><b>1) Файлмен жұмыс жасаудың дұрыс реттілігі қайсы?</b></p>

      <label class="quiz-option">
        <input type="radio" name="q1" value="a">
        а) Оқу → Жазу → Ашу → Жабу
      </label>

      <label class="quiz-option">
        <input type="radio" name="q1" value="b">
        ә) Ашу → Оқу/жазу → Жабу
      </label>

      <label class="quiz-option">
        <input type="radio" name="q1" value="c">
        б) Ашу → Жабу → Оқу
      </label>
    </div>

    <!-- 2-сұрақ -->
    <div class="quiz-item" data-correct="a">
      <p><b>2) Тек оқу үшін мәтіндік файлды ашу режимі?</b></p>

      <label class="quiz-option">
        <input type="radio" name="q2" value="a">
        а) <code>r</code>
      </label>

      <label class="quiz-option">
        <input type="radio" name="q2" value="b">
        ә) <code>w</code>
      </label>

      <label class="quiz-option">
        <input type="radio" name="q2" value="c">
        б) <code>a</code>
      </label>
    </div>

    <!-- 3-сұрақ -->
    <div class="quiz-item" data-correct="c">
      <p><b>3) Қай функция файлдан барлық жолдарды тізім ретінде қайтарады?</b></p>

      <label class="quiz-option">
        <input type="radio" name="q3" value="a">
        а) <code>read()</code>
      </label>

      <label class="quiz-option">
        <input type="radio" name="q3" value="b">
        ә) <code>readline()</code>
      </label>

      <label class="quiz-option">
        <input type="radio" name="q3" value="c">
        б) <code>readlines()</code>
      </label>
    </div>

    <!-- 4-сұрақ -->
    <div class="quiz-item" data-correct="b">
      <p><b>4) Қай функция файлға мәтін жазу үшін қолданылады?</b></p>

      <label class="quiz-option">
        <input type="radio" name="q4" value="a">
        а) <code>print()</code>
      </label>

      <label class="quiz-option">
        <input type="radio" name="q4" value="b">
        ә) <code>write()</code>
      </label>

      <label class="quiz-option">
        <input type="radio" name="q4" value="c">
        б) <code>input()</code>
      </label>
    </div>

    <!-- 5-сұрақ -->
    <div class="quiz-item" data-correct="a">
      <p><b>5) Файл атауын өзгерту үшін қандай модуль қолданылады?</b></p>

      <label class="quiz-option">
        <input type="radio" name="q5" value="a">
        а) <code>os</code>
      </label>

      <label class="quiz-option">
        <input type="radio" name="q5" value="b">
        ә) <code>math</code>
      </label>

      <label class="quiz-option">
        <input type="radio" name="q5" value="c">
        б) <code>random</code>
      </label>
    </div>

  </div>
 <button type="button" id="checkQuiz" class="quiz-check-btn">
      Жауаптарды тексеру
    </button>
    <p id="quizResult" class="quiz-result"></p>


</section>

{% endblock %}
